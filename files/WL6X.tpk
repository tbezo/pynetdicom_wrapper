{
    "meta": {
        "contact": "https://github.com/tbezo/pynetdicom_wrapper",
        "datetime": "2024-09-30 15:29:30.404401+00:00",
        "description": "Winston Lutz with DICOM Q/R",
        "id": "adaca810-914b-4225-bb71-9ce5b9ef56de",
        "name": "WL6X",
        "version": "3.1.1.2"
    },
    "objects": {
        "testlistcycles": [
        ],
        "testlists": [
            "{\"key\": [\"winston-lutz-6x-py\"], \"object\": {\"model\": \"qa.testlist\", \"fields\": {\"name\": \"Winston Lutz 6X (py)\", \"slug\": \"winston-lutz-6x-py\", \"description\": \"Irradiate Winston Lutz patient. Afterwards set \\\"Images Done\\\" to \\\"Yes\\\" \", \"javascript\": \"\", \"warning_message\": \"Do not treat\"}}, \"dependencies\": [{\"model\": \"qa.category\", \"fields\": {\"name\": \"Image Analysis\", \"slug\": \"image-analysis\", \"description\": \"Kategorie f\\u00fcr Bildanalyse\"}}, {\"model\": \"qa.category\", \"fields\": {\"name\": \"Image Analysis\", \"slug\": \"image-analysis\", \"description\": \"Kategorie f\\u00fcr Bildanalyse\"}}, {\"model\": \"qa.category\", \"fields\": {\"name\": \"Image Analysis\", \"slug\": \"image-analysis\", \"description\": \"Kategorie f\\u00fcr Bildanalyse\"}}, {\"model\": \"qa.category\", \"fields\": {\"name\": \"Image Analysis\", \"slug\": \"image-analysis\", \"description\": \"Kategorie f\\u00fcr Bildanalyse\"}}, {\"model\": \"qa.category\", \"fields\": {\"name\": \"Image Analysis\", \"slug\": \"image-analysis\", \"description\": \"Kategorie f\\u00fcr Bildanalyse\"}}, {\"model\": \"qa.category\", \"fields\": {\"name\": \"Image Analysis\", \"slug\": \"image-analysis\", \"description\": \"Kategorie f\\u00fcr Bildanalyse\"}}, {\"model\": \"qa.category\", \"fields\": {\"name\": \"Image Analysis\", \"slug\": \"image-analysis\", \"description\": \"Kategorie f\\u00fcr Bildanalyse\"}}, {\"model\": \"qa.category\", \"fields\": {\"name\": \"Image Analysis\", \"slug\": \"image-analysis\", \"description\": \"Kategorie f\\u00fcr Bildanalyse\"}}, {\"model\": \"qa.category\", \"fields\": {\"name\": \"Image Analysis\", \"slug\": \"image-analysis\", \"description\": \"Kategorie f\\u00fcr Bildanalyse\"}}, {\"model\": \"qa.category\", \"fields\": {\"name\": \"Image Analysis\", \"slug\": \"image-analysis\", \"description\": \"Kategorie f\\u00fcr Bildanalyse\"}}, {\"model\": \"qa.category\", \"fields\": {\"name\": \"Image Analysis\", \"slug\": \"image-analysis\", \"description\": \"Kategorie f\\u00fcr Bildanalyse\"}}, {\"model\": \"qa.category\", \"fields\": {\"name\": \"Image Analysis\", \"slug\": \"image-analysis\", \"description\": \"Kategorie f\\u00fcr Bildanalyse\"}}, {\"model\": \"qa.test\", \"fields\": {\"name\": \"WL Isozentrumkugel Gantry/Colli\", \"display_name\": \"\", \"slug\": \"wl_izkugel_gc\", \"description\": \"The 3D isocenter diameter of the gantry and collimator axes as determined by the gantry and collimator images in mm.\\r\\n<a href=\\\"https://pylinac.readthedocs.io/en/latest/winston_lutz.html#interpreting-results\\\">Pylinac Winston Lutz Documentation</a>\", \"procedure\": null, \"category\": [\"Image Analysis\"], \"chart_visibility\": true, \"type\": \"composite\", \"flag_when\": null, \"hidden\": false, \"skip_without_comment\": false, \"require_comment\": false, \"display_image\": false, \"choices\": null, \"constant_value\": null, \"wrap_low\": null, \"wrap_high\": null, \"calculation_procedure\": \"wl_izkugel_gc = wl_pynet[\\\"gantry_coll_3d_iso_diameter_mm\\\"]\\n\", \"formatting\": \"%.2f\"}}, {\"model\": \"qa.test\", \"fields\": {\"name\": \"PatientID\", \"display_name\": \"\", \"slug\": \"patientid\", \"description\": \"A patient id as String for the pynetdicom_wrapper script.\", \"procedure\": null, \"category\": [\"Image Analysis\"], \"chart_visibility\": true, \"type\": \"string\", \"flag_when\": null, \"hidden\": false, \"skip_without_comment\": false, \"require_comment\": false, \"display_image\": false, \"choices\": null, \"constant_value\": null, \"wrap_low\": null, \"wrap_high\": null, \"calculation_procedure\": \"previous = UTILS.previous_test_instance(\\\"patientid\\\")\\npatientid = previous.string_value if previous else None\\n\", \"formatting\": \"\"}}, {\"model\": \"qa.test\", \"fields\": {\"name\": \"WL CAX to BB max\", \"display_name\": \"\", \"slug\": \"wl_cax_2_bb_max\", \"description\": \"The maximum 2D distance from the field CAX to the BB across all images analyzed in mm.\\r\\n<a href=\\\"https://pylinac.readthedocs.io/en/latest/winston_lutz.html#interpreting-results\\\">PyLinac Winston Lutz Documentation</a>\", \"procedure\": null, \"category\": [\"Image Analysis\"], \"chart_visibility\": true, \"type\": \"composite\", \"flag_when\": null, \"hidden\": false, \"skip_without_comment\": false, \"require_comment\": false, \"display_image\": false, \"choices\": null, \"constant_value\": null, \"wrap_low\": null, \"wrap_high\": null, \"calculation_procedure\": \"wl_cax_2_bb_max = wl_pynet[\\\"max_2d_cax_to_bb_mm\\\"]\\n\", \"formatting\": \"%.2f\"}}, {\"model\": \"qa.test\", \"fields\": {\"name\": \"WL Iso to BB X\", \"display_name\": \"\", \"slug\": \"wl_iso_2_bb_x\", \"description\": \"The Cartesian vector that would move the BB to the radiation isocenter. Each value is in mm. See also <a href=\\\"https://pylinac.readthedocs.io/en/latest/winston_lutz.html#wl-virtual-shift\\\">Virtual Shifting</a>\", \"procedure\": null, \"category\": [\"Image Analysis\"], \"chart_visibility\": true, \"type\": \"composite\", \"flag_when\": null, \"hidden\": false, \"skip_without_comment\": false, \"require_comment\": false, \"display_image\": false, \"choices\": null, \"constant_value\": null, \"wrap_low\": null, \"wrap_high\": null, \"calculation_procedure\": \"wl_iso_2_bb_x = wl_pynet[\\\"applied_bb_shift_vector\\\"][\\\"x\\\"]\\n\", \"formatting\": \"%.2f\"}}, {\"model\": \"qa.test\", \"fields\": {\"name\": \"WL Iso to BB Y\", \"display_name\": \"\", \"slug\": \"wl_iso_2_bb_y\", \"description\": \"The Cartesian vector that would move the BB to the radiation isocenter. Each value is in mm. See also <a href=\\\"https://pylinac.readthedocs.io/en/latest/winston_lutz.html#wl-virtual-shift\\\">Virtual Shifting</a>\", \"procedure\": null, \"category\": [\"Image Analysis\"], \"chart_visibility\": true, \"type\": \"composite\", \"flag_when\": null, \"hidden\": false, \"skip_without_comment\": false, \"require_comment\": false, \"display_image\": false, \"choices\": null, \"constant_value\": null, \"wrap_low\": null, \"wrap_high\": null, \"calculation_procedure\": \"wl_iso_2_bb_y = wl_pynet[\\\"applied_bb_shift_vector\\\"][\\\"y\\\"]\\n\", \"formatting\": \"%.2f\"}}, {\"model\": \"qa.test\", \"fields\": {\"name\": \"RTPlan Name\", \"display_name\": \"\", \"slug\": \"rtplanname\", \"description\": \"A RTPlan name as String for the pynetdicom_wrapper script.\", \"procedure\": null, \"category\": [\"Image Analysis\"], \"chart_visibility\": true, \"type\": \"string\", \"flag_when\": null, \"hidden\": false, \"skip_without_comment\": false, \"require_comment\": false, \"display_image\": false, \"choices\": null, \"constant_value\": null, \"wrap_low\": null, \"wrap_high\": null, \"calculation_procedure\": \"previous = UTILS.previous_test_instance(\\\"rtplanname\\\")\\nrtplanname = previous.string_value if previous else None\\n\", \"formatting\": \"\"}}, {\"model\": \"qa.test\", \"fields\": {\"name\": \"Image Acquisition DateTime\", \"display_name\": \"\", \"slug\": \"aq_datetime\", \"description\": \"DICOM acquisition date and time string from image_download.\", \"procedure\": null, \"category\": [\"Image Analysis\"], \"chart_visibility\": false, \"type\": \"scomposite\", \"flag_when\": null, \"hidden\": false, \"skip_without_comment\": false, \"require_comment\": false, \"display_image\": false, \"choices\": null, \"constant_value\": null, \"wrap_low\": null, \"wrap_high\": null, \"calculation_procedure\": \"aq_datetime = wl_pynet[\\\"datetime\\\"]\\n\", \"formatting\": \"\"}}, {\"model\": \"qa.test\", \"fields\": {\"name\": \"WL CAX to BB mean\", \"display_name\": \"\", \"slug\": \"wl_cax_2_bb_mean\", \"description\": \"The mean 2D distance from the field CAX to the BB across all images analyzed in mm.\\r\\n<a href=\\\"https://pylinac.readthedocs.io/en/latest/winston_lutz.html#interpreting-results\\\">Pylinac Winston Lutz Documentation</a>\", \"procedure\": null, \"category\": [\"Image Analysis\"], \"chart_visibility\": true, \"type\": \"composite\", \"flag_when\": null, \"hidden\": false, \"skip_without_comment\": false, \"require_comment\": false, \"display_image\": false, \"choices\": null, \"constant_value\": null, \"wrap_low\": null, \"wrap_high\": null, \"calculation_procedure\": \"wl_cax_2_bb_mean = wl_pynet[\\\"mean_2d_cax_to_bb_mm\\\"]\\n\", \"formatting\": \"%.2f\"}}, {\"model\": \"qa.test\", \"fields\": {\"name\": \"Winston Lutz (pynet)\", \"display_name\": \"\", \"slug\": \"wl_pynet\", \"description\": \"Open Winston Lutz Patient, irradiate and then open testlist \", \"procedure\": null, \"category\": [\"Image Analysis\"], \"chart_visibility\": false, \"type\": \"scomposite\", \"flag_when\": null, \"hidden\": false, \"skip_without_comment\": false, \"require_comment\": false, \"display_image\": false, \"choices\": null, \"constant_value\": null, \"wrap_low\": null, \"wrap_high\": null, \"calculation_procedure\": \"from pathlib import Path\\nfrom tempfile import TemporaryDirectory\\n\\nfrom pylinac import WinstonLutz\\nfrom pynetdicom_wrapper import PynetdicomWrapper\\n\\ntempDir = TemporaryDirectory()\\noutputpath = Path(tempDir.name)\\n\\nif images_done:\\n    if rtplanname and patientid:\\n        pndw = PynetdicomWrapper(patientid, rtplanname)\\n        ldt = pndw.get_latest_series(outputpath, \\\"ORIGINAL\\\\PRIMARY\\\\PORTAL\\\")\\n\\n        # get the virtual shift vector\\n        mywl = WinstonLutz(outputpath)\\n        mywl.analyze(apply_virtual_shift=False)\\n        bb_shift_vector_tmp = mywl.bb_shift_vector.dict()\\n\\n        # repeated with applied virtual shift\\n        mywl.analyze(apply_virtual_shift=True)\\n        results_dict = mywl.results_data(as_dict=True)\\n        results_dict[\\\"applied_bb_shift_vector\\\"] = bb_shift_vector_tmp\\n\\n        results_dict[\\\"datetime\\\"] = ldt\\n\\n        wl_pynet = results_dict\\n\\n    else:\\n        raise ValueError(\\\"Missing Planname or PatientID\\\")\\n        wl_pynet = \\\"Missing plan name or patient ID\\\"\\n\\nelse:\\n    wl_pynet = \\\"waiting on image acquisition\\\"\\n\", \"formatting\": \"\"}}, {\"model\": \"qa.test\", \"fields\": {\"name\": \"Images Done\", \"display_name\": \"\", \"slug\": \"images_done\", \"description\": \"Switch to start image download\", \"procedure\": null, \"category\": [\"Image Analysis\"], \"chart_visibility\": false, \"type\": \"boolean\", \"flag_when\": null, \"hidden\": false, \"skip_without_comment\": false, \"require_comment\": false, \"display_image\": false, \"choices\": null, \"constant_value\": null, \"wrap_low\": null, \"wrap_high\": null, \"calculation_procedure\": \"\", \"formatting\": \"\"}}, {\"model\": \"qa.test\", \"fields\": {\"name\": \"WL Innkreis Couch\", \"display_name\": \"\", \"slug\": \"wl_ik_couch\", \"description\": \"The 2D isocenter diameter of the couch axis only as determined by the couch images in mm.\\r\\n<a href=\\\"https://pylinac.readthedocs.io/en/latest/winston_lutz.html#interpreting-results\\\">Pylinac Winston Lutz Documentation</a>\", \"procedure\": null, \"category\": [\"Image Analysis\"], \"chart_visibility\": true, \"type\": \"composite\", \"flag_when\": null, \"hidden\": false, \"skip_without_comment\": false, \"require_comment\": false, \"display_image\": false, \"choices\": null, \"constant_value\": null, \"wrap_low\": null, \"wrap_high\": null, \"calculation_procedure\": \"wl_ik_couch = wl_pynet[\\\"couch_2d_iso_diameter_mm\\\"]\\n\", \"formatting\": \"%.2f\"}}, {\"model\": \"qa.test\", \"fields\": {\"name\": \"WL Iso to BB Z\", \"display_name\": \"\", \"slug\": \"wl_iso_2_bb_z\", \"description\": \"The Cartesian vector that would move the BB to the radiation isocenter. Each value is in mm. See also <a href=\\\"https://pylinac.readthedocs.io/en/latest/winston_lutz.html#wl-virtual-shift\\\">Virtual Shifting</a>\", \"procedure\": null, \"category\": [\"Image Analysis\"], \"chart_visibility\": true, \"type\": \"composite\", \"flag_when\": null, \"hidden\": false, \"skip_without_comment\": false, \"require_comment\": false, \"display_image\": false, \"choices\": null, \"constant_value\": null, \"wrap_low\": null, \"wrap_high\": null, \"calculation_procedure\": \"wl_iso_2_bb_z = wl_pynet[\\\"applied_bb_shift_vector\\\"][\\\"z\\\"]\\n\", \"formatting\": \"%.2f\"}}, {\"model\": \"qa.testlistmembership\", \"fields\": {\"test_list\": [\"winston-lutz-6x-py\"], \"test\": [\"PatientID\"], \"order\": 0}}, {\"model\": \"qa.testlistmembership\", \"fields\": {\"test_list\": [\"winston-lutz-6x-py\"], \"test\": [\"RTPlan Name\"], \"order\": 1}}, {\"model\": \"qa.testlistmembership\", \"fields\": {\"test_list\": [\"winston-lutz-6x-py\"], \"test\": [\"Images Done\"], \"order\": 2}}, {\"model\": \"qa.testlistmembership\", \"fields\": {\"test_list\": [\"winston-lutz-6x-py\"], \"test\": [\"Winston Lutz (pynet)\"], \"order\": 3}}, {\"model\": \"qa.testlistmembership\", \"fields\": {\"test_list\": [\"winston-lutz-6x-py\"], \"test\": [\"Image Acquisition DateTime\"], \"order\": 4}}, {\"model\": \"qa.testlistmembership\", \"fields\": {\"test_list\": [\"winston-lutz-6x-py\"], \"test\": [\"WL CAX to BB max\"], \"order\": 5}}, {\"model\": \"qa.testlistmembership\", \"fields\": {\"test_list\": [\"winston-lutz-6x-py\"], \"test\": [\"WL CAX to BB mean\"], \"order\": 6}}, {\"model\": \"qa.testlistmembership\", \"fields\": {\"test_list\": [\"winston-lutz-6x-py\"], \"test\": [\"WL isocenter diameter Gantry+Colli\"], \"order\": 7}}, {\"model\": \"qa.testlistmembership\", \"fields\": {\"test_list\": [\"winston-lutz-6x-py\"], \"test\": [\"WL isocenter diameter couch\"], \"order\": 8}}, {\"model\": \"qa.testlistmembership\", \"fields\": {\"test_list\": [\"winston-lutz-6x-py\"], \"test\": [\"WL Iso to BB X\"], \"order\": 9}}, {\"model\": \"qa.testlistmembership\", \"fields\": {\"test_list\": [\"winston-lutz-6x-py\"], \"test\": [\"WL Iso to BB Y\"], \"order\": 10}}, {\"model\": \"qa.testlistmembership\", \"fields\": {\"test_list\": [\"winston-lutz-6x-py\"], \"test\": [\"WL Iso to BB Z\"], \"order\": 11}}]}"
        ],
        "tests": [
        ]
    }
}